<!-- index.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>로그인 로더 (Lottie)</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:20px; background:#f4f6f8; }
  .app { max-width:480px; margin:40px auto; }

  /* 로더 오버레이 */
  .loader-overlay {
    position: fixed;
    inset: 0;
    display: none;             /* showLoader()로 보임 */
    align-items: center;
    justify-content: center;
    background: rgba(0,0,0,0.45);
    z-index: 9999;
  }
  .loader-card {
    width: 160px;
    height: 160px;
    background: #fff;
    border-radius: 12px;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow: 0 8px 20px rgba(0,0,0,0.25);
  }

  /* 스크린리더용 숨김 텍스트 */
  .sr-only {
    position: absolute !important;
    width: 1px; height: 1px;
    padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0);
    white-space:nowrap; border:0;
  }

  /* reduced motion 사용자는 애니메이션 멈춤 */
  @media (prefers-reduced-motion: reduce) {
    lottie-player { display:block; opacity:0.9; }
    .loader-overlay { background: rgba(0,0,0,0.2); }
  }
</style>
</head>
<body>
  <div class="app" id="app">
    <h1>샘플 로그인</h1>
    <button id="loginBtn">로그인 시도 (로더 표시)</button>
  </div>

  <!-- 로더 오버레이 -->
  <div class="loader-overlay" id="loader" role="status" aria-live="polite" aria-busy="true" aria-label="로딩 중">
    <div class="loader-card" id="loaderCard">
      <!-- lottie-player: json 파일 경로만 바꿔주세요 -->
      <!-- src는 로컬 파일(예: ./assets/lottie/login-spinner.json) 또는 CDN URL 가능 -->
      <lottie-player id="lottiePlayer"
        src="./assets/lottie/login-spinner.json"
        background="transparent"
        speed="1"
        style="width:120px; height:120px;"
        loop
        autoplay
        aria-hidden="true"></lottie-player>

      <span class="sr-only">로딩 중입니다. 잠시만 기다려주세요.</span>
    </div>
  </div>

  <!-- lottiefiles web component (CDN) -->
   
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <script>
    const loginBtn = document.getElementById('loginBtn');
    const loader = document.getElementById('loader');
    const lottiePlayer = document.getElementById('lottiePlayer');

    function showLoader() {
      // 접근성: 메인 컨텐츠 aria-hidden 처리
      document.getElementById('app').setAttribute('aria-hidden', 'true');
      loader.style.display = 'flex';
      // reduced-motion 사용자는 자동으로 애니메이션을 멈추고 싶다면 제어 가능
      // lottiePlayer.play(); // 필요시 재생
    }

    function hideLoader() {
      loader.style.display = 'none';
      document.getElementById('app').removeAttribute('aria-hidden');
    }

    loginBtn.addEventListener('click', () => {
      showLoader();
      // 예: 서버 응답 시 hideLoader() 호출. 데모용으로 2.5초 후 숨김
      setTimeout(() => { hideLoader(); alert('로그인 완료(데모)'); }, 2500);
    });

    // prefers-reduced-motion 감지해서 자동재생 끄기 (선택)
    const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (reduced) {
      lottiePlayer.autoplay = false;
      lottiePlayer.pause();
    }
  </script>
</body>
</html>
